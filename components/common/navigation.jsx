"use client";

import gsap from "gsap";
import Link from "next/link";
import { useEffect, useRef } from "react";
import { usePathname } from "next/navigation";
import styles from "@/styles/nav.module.css";

const Logo = () => (
  <svg width="843" height="151" viewBox="0 0 843 151" fill="none">
    <path
      d="M791.632 112C795.449 112 798.93 111.429 802.074 110.286C805.33 109.029 808.081 107.086 810.326 104.457C812.684 101.829 814.481 98.4571 815.716 94.3429C817.063 90.2286 817.737 85.2571 817.737 79.4286C817.737 73.6 817.063 68.6286 815.716 64.5143C814.481 60.4 812.684 57.0286 810.326 54.4C808.081 51.7714 805.33 49.8857 802.074 48.7429C798.93 47.4857 795.449 46.8571 791.632 46.8571H770.579V112H791.632ZM747 124V4H770.579V34.8571H791.632C799.379 34.8571 806.396 35.8857 812.684 37.9429C819.084 40 824.53 42.9714 829.021 46.8571C833.512 50.7429 836.937 55.4286 839.295 60.9143C841.765 66.4 843 72.5714 843 79.4286C843 86.2857 841.765 92.4571 839.295 97.9429C836.937 103.429 833.512 108.114 829.021 112C824.53 115.886 819.084 118.857 812.684 120.914C806.396 122.971 799.379 124 791.632 124H747Z"
      fill="black"
    />
    <path
      d="M665.596 95.5833C665.596 106.491 672.138 111.944 685.22 111.944H709.11V79.2222H685.22C672.138 79.2222 665.596 84.6759 665.596 95.5833ZM709.11 67.1667C709.11 58.9 706.949 52.8148 702.626 48.9111C698.416 45.0074 692.899 43.0556 686.073 43.0556C680.954 43.0556 675.949 43.8593 671.057 45.4667C666.165 46.9593 661.785 49.0259 657.917 51.6667L651.945 41.3333C654.448 39.6111 657.178 38.1185 660.136 36.8556C663.207 35.5926 666.336 34.5593 669.521 33.7556C672.706 32.837 675.835 32.1482 678.906 31.6889C682.092 31.2296 685.05 31 687.78 31C695.061 31 701.488 31.8611 707.062 33.5833C712.637 35.3056 717.358 37.7741 721.226 40.9889C725.094 44.2037 727.994 48.05 729.928 52.5278C731.976 56.8907 733 61.7704 733 67.1667V124H685.22C669.749 124 658.316 121.646 650.921 116.939C643.64 112.231 640 105.113 640 95.5833C640 86.0537 643.64 78.9352 650.921 74.2278C658.316 69.5204 669.749 67.1667 685.22 67.1667H709.11Z"
      fill="black"
    />
    <path d="M628 124H604V4H628V124Z" fill="black" />
    <path
      d="M443.672 113.25C448.967 113.25 453.883 112.299 458.421 110.396C463.067 108.494 467.605 105.808 472.034 102.339L478.517 112.411C476.464 114.313 474.033 116.048 471.224 117.614C468.523 119.181 465.552 120.524 462.31 121.643C459.177 122.65 455.882 123.433 452.424 123.993C448.967 124.664 445.509 125 442.052 125C434.38 125 427.357 123.937 420.983 121.811C414.716 119.796 409.368 116.831 404.938 112.914C400.508 108.886 397.051 103.962 394.566 98.1429C392.189 92.3238 391 85.6095 391 78C391 70.5024 392.134 63.844 394.403 58.025C396.78 52.094 400.022 47.1702 404.128 43.2536C408.341 39.225 413.311 36.2036 419.038 34.1893C424.764 32.0631 431.085 31 438 31C444.483 31 450.587 32.0071 456.314 34.0214C462.04 36.0357 467.01 39.0012 471.224 42.9179C475.438 46.7226 478.787 51.3667 481.272 56.85C483.757 62.3333 485 68.544 485 75.4821V87.2321H415.797C417.093 96.5202 420.172 103.179 425.034 107.207C430.005 111.236 436.217 113.25 443.672 113.25ZM438 41.9107C434.867 41.9107 431.949 42.5262 429.248 43.7571C426.547 44.9881 424.17 46.9464 422.117 49.6321C420.172 52.3179 418.552 55.7869 417.255 60.0393C416.067 64.2917 415.418 69.4393 415.31 75.4821H460.69C460.69 69.6631 460.041 64.6274 458.745 60.375C457.448 56.1226 455.72 52.6536 453.559 49.9679C451.506 47.1702 449.075 45.156 446.266 43.925C443.564 42.5821 440.809 41.9107 438 41.9107Z"
      fill="black"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M519.243 76.3422C516.41 77.2193 513.357 76.4154 511.153 74.1861C501.585 64.4652 495.196 50.5781 494 35.01C498.186 33.6944 502.561 33 507.093 33C508.604 33 512 33.5 513.563 34.2558C515.042 53.8804 527.206 68.2659 544.485 68.2659V72.4685C535.767 72.4685 527.3 73.8207 519.243 76.3422ZM569.758 76.3422C572.59 77.2193 575.643 76.4154 577.846 74.1861C587.446 64.4652 593.804 50.5781 595 35.01C590.814 33.6944 586.439 33 581.907 33C580.396 33 577 33.5 575.437 34.2558C573.958 53.8804 561.794 68.2659 544.515 68.2659V72.4685C553.233 72.4685 561.7 73.8207 569.758 76.3422Z"
      fill="#7C7C00"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M519.243 80.3443C516.41 79.4407 513.357 80.269 511.154 82.5658C501.554 92.5813 495.165 106.851 494 122.928C498.186 124.283 502.561 124.999 507.094 124.999C508.604 124.999 512 124.5 513.563 123.735C515.042 103.516 527.206 88.6651 544.485 88.6651V84.3354C535.767 84.3354 527.3 82.9423 519.243 80.3443ZM569.758 80.3454C572.59 79.4418 575.643 80.2701 577.846 82.5668C587.415 92.5818 593.804 106.852 595 122.929C590.814 124.284 586.439 125 581.907 125C580.396 125 577.5 124.5 575.437 123.736C573.958 103.517 561.795 88.6663 544.515 88.6663V84.3366C553.233 84.3366 561.7 82.9433 569.758 80.3454Z"
      fill="#7C7C00"
    />
    <path d="M342 24H351V36H342V24Z" fill="black" />
    <path
      d="M325 4H342.684V88C342.684 92.3429 343.154 96.0571 344.095 99.1429C345.153 102.114 346.504 104.571 348.15 106.514C349.913 108.343 351.911 109.714 354.145 110.629C356.378 111.543 358.729 112 361.197 112C364.724 112 368.132 111.486 371.424 110.457C374.715 109.314 377.477 108.114 379.711 106.857L385 118C381.474 119.714 377.418 121.143 372.834 122.286C368.368 123.429 363.901 124 359.434 124C346.152 124 335.925 120.8 328.755 114.4C321.585 108 318 99.2 318 88V24H325V4Z"
      fill="black"
    />
    <path d="M301 24H318V36H301V24Z" fill="black" />
    <path d="M305 24C317.4 24 324 18 325 4V24H305Z" fill="black" />
    <path
      d="M354.092 35.7312C354.09 12.0937 373.136 -2.4065 402.99 2.60613C397.067 32.1288 376.633 41.5937 354.092 35.7312Z"
      fill="#7C7C00"
    />
    <path
      d="M235.088 43V108.143H255.702C259.44 108.143 262.848 107.571 265.926 106.429C269.115 105.171 271.808 103.229 274.007 100.6C276.316 97.9714 278.075 94.6 279.284 90.4857C280.604 86.3714 281.263 81.4 281.263 75.5714C281.263 69.7429 280.604 64.7714 279.284 60.6571C278.075 56.5429 276.316 53.1714 274.007 50.5429C271.808 47.9143 269.115 46.0286 265.926 44.8857C262.848 43.6286 259.44 43 255.702 43H235.088ZM255.702 31C263.288 31 270.159 32.0286 276.316 34.0857C282.582 36.1429 287.915 39.1143 292.312 43C296.71 46.8857 300.063 51.5714 302.372 57.0571C304.791 62.5429 306 68.7143 306 75.5714C306 82.4286 304.791 88.6 302.372 94.0857C300.063 99.5714 296.71 104.257 292.312 108.143C287.915 112.029 282.582 115 276.316 117.057C270.159 119.114 263.288 120.143 255.702 120.143H235.088V151H212V31H255.702Z"
      fill="black"
    />
    <path
      d="M131.596 43V108.143H151.772C155.43 108.143 158.766 107.571 161.779 106.429C164.899 105.171 167.536 103.229 169.688 100.6C171.947 97.9714 173.669 94.6 174.853 90.4857C176.144 86.3714 176.789 81.4 176.789 75.5714C176.789 69.7429 176.144 64.7714 174.853 60.6571C173.669 56.5429 171.947 53.1714 169.688 50.5429C167.536 47.9143 164.899 46.0286 161.779 44.8857C158.766 43.6286 155.43 43 151.772 43H131.596ZM151.772 31C159.196 31 165.922 32.0286 171.947 34.0857C178.081 36.1429 183.299 39.1143 187.604 43C191.908 46.8857 195.189 51.5714 197.449 57.0571C199.816 62.5429 201 68.7143 201 75.5714C201 82.4286 199.816 88.6 197.449 94.0857C195.189 99.5714 191.908 104.257 187.604 108.143C183.299 112.029 178.081 115 171.947 117.057C165.922 119.114 159.196 120.143 151.772 120.143H131.596V151H109V31H151.772Z"
      fill="black"
    />
    <path
      d="M25.8716 95.5833C25.8716 106.491 32.4832 111.944 45.7064 111.944H69.8532V79.2222H45.7064C32.4832 79.2222 25.8716 84.6759 25.8716 95.5833ZM69.8532 67.1667C69.8532 58.9 67.6685 52.8148 63.2991 48.9111C59.0446 45.0074 53.4679 43.0556 46.5688 43.0556C41.3945 43.0556 36.3352 43.8593 31.3908 45.4667C26.4465 46.9593 22.0196 49.0259 18.1101 51.6667L12.0734 41.3333C14.6031 39.6111 17.3627 38.1185 20.3523 36.8556C23.4569 35.5926 26.619 34.5593 29.8385 33.7556C33.0581 32.837 36.2202 32.1482 39.3248 31.6889C42.5443 31.2296 45.534 31 48.2936 31C55.6526 31 62.1492 31.8611 67.7835 33.5833C73.4177 35.3056 78.1896 37.7741 82.0991 40.9889C86.0086 44.2037 88.9407 48.05 90.8954 52.5278C92.9651 56.8907 94 61.7704 94 67.1667V124H45.7064C30.0685 124 18.5125 121.646 11.0385 116.939C3.67951 112.231 0 105.113 0 95.5833C0 86.0537 3.67951 78.9352 11.0385 74.2278C18.5125 69.5204 30.0685 67.1667 45.7064 67.1667H69.8532Z"
      fill="black"
    />
  </svg>
);

const navItems = [
  { title: "Works", link: "/projects" },
  { title: "Services", link: "/services" },
  { title: "Industries", link: "/industries" },
  { title: "About", link: "/about" },
  { title: "Contact", link: "/contacts" },
];

export const Navigation = () => {
  const pathname = usePathname();
  const logoRef = useRef(null);
  const menuRef = useRef(null);
  const contactRef = useRef(null);

  const isActive = (href) =>
    pathname === href || pathname.startsWith(`${href}/`);

  useEffect(() => {
    if (logoRef.current) {
      gsap.to(logoRef.current, {
        x: 0,
        opacity: 1,
        duration: 1,
        delay: 1.2,
      });
    }

    if (menuRef.current) {
      const items = menuRef.current.querySelectorAll("li");
      gsap.fromTo(
        items,
        {
          y: -20,
          opacity: 0,
        },
        {
          y: 0,
          opacity: 1,
          duration: 0.6,
          stagger: 0.1,
          delay: 1.5,
        },
      );
    }

    if (contactRef.current) {
      gsap.to(contactRef.current, {
        x: 0,
        opacity: 1,
        duration: 1,
        delay: 1.2,
      });
    }
  }, []);

  return (
    <section className={styles.app_header}>
      <div className={styles.app_nav_wrap}>
        <div className={styles.app_nav_logo} ref={logoRef}>
          <Logo />
        </div>
        <div className={styles.app_nav_links}>
          <ul ref={menuRef}>
            {navItems.map((item) => (
              <li
                key={item.title}
                className={isActive(item.link) ? styles.active : ""}
              >
                <Link href={item.link}>{item.title}</Link>
              </li>
            ))}
          </ul>
        </div>
      </div>
      <div className={styles.app_nav_contact} ref={contactRef}>
        <Link href="">Lets talk</Link>
      </div>
    </section>
  );
};
